{% extends 'page.html' %}
{% load i18n %}

{% block content %}
<div class="flex items-center justify-center">
    <div class="w-full max-w-4xl p-8 bg-white shadow-2xl rounded-xl">
        <h1 class="text-3xl font-semibold text-center text-gray-800 mb-6">{{ object.name }}</h1>
        <h2 class="text-xl text-center text-gray-600 mb-6">{{ object.description }}</h2>

        {% if formset.total_error_count %}
        <div class="text-red-600 mb-4">
            {{ formset.errors }}
        </div>
        {% endif %}

        <form method="post" class="space-y-6">
            {% csrf_token %}
            {{ formset.management_form }}

            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Date
                        </th>
                        <th scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Option
                        </th>
                        <th scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Yes
                        </th>
                        <th scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Tentative
                        </th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    {% for form in formset %}
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                            {{ form.initial.option.option }}
                            {{ form.option.as_hidden }}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                            <div class="flex items-center space-x-4">
                                <label>
                                    <input type="radio" name="{{ form.choice.html_name }}" value="no" {% if form.choice.value == "no" %}checked{% endif %}>
                                    No
                                </label>
                                <label>
                                    <input type="radio" name="{{ form.choice.html_name }}" value="yes" {% if form.choice.value == "yes" %}checked{% endif %}>
                                    Yes
                                </label>
                                <label>
                                    <input type="radio" name="{{ form.choice.html_name }}" value="tentative" {% if form.choice.value == "tentative" %}checked{% endif %}>
                                    Tentative
                                </label>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                            <div class="overflow-x-auto scrollbar-hide" style="min-width: 150px; max-width: 150px;">
                                <ul class="list-none flex space-x-2">
                                    {% for name in form.initial.option.selected_context.yes %}
                                    <li class="whitespace-nowrap">
                                        {{ name }}
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                            <div class="overflow-x-auto scrollbar-hide" style="min-width: 150px; max-width: 150px;">
                                <ul class="list-none flex space-x-2">
                                    {% for name in form.initial.option.selected_context.tentative %}
                                    <li class="whitespace-nowrap">
                                        {{ name }}
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <div>
                <button type="submit"
                    class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    {% translate "Submit" %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock content %}
